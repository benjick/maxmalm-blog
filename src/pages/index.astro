---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import { getCollection } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";

const posts = (await getCollection("blog"))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .filter((post) => post.data.linkTo);
---

<!doctype html>
<html lang="sv">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body
    class="bg-gray-50 text-gray-900 font-sans antialiased min-h-screen flex flex-col"
  >
    <Header />
    <main class="flex-grow max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 w-full">
      <section class="mb-16 text-center sm:text-left">
        <h1
          class="text-4xl font-extrabold tracking-tight text-gray-900 sm:text-5xl mb-6"
        >
          ü§† Hej, jag heter Max!
        </h1>
        <div class="prose prose-lg text-gray-600 max-w-none">
          <p>
            Jag √§r en superbra full-stackutvecklare som gillar att l√∂sa problem
            med TypeScript.
          </p>
          <p
            class="font-medium text-gray-800 mt-4 flex items-center justify-center sm:justify-start gap-2"
          >
            <span>üìç</span> Stockholm, Sverige
          </p>
        </div>
      </section>

      <div class="border-t border-gray-200 my-12"></div>

      <section>
        <h2 class="text-2xl font-bold mb-8 text-gray-900">
          N√•gra av mina texter
        </h2>
        <div class="grid gap-6 sm:grid-cols-2">
          {
            posts.map((post) => (
              <article class="group relative bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow duration-300 border border-gray-100 flex flex-col h-full">
                <div class="flex-1">
                  <h3 class="text-xl font-semibold text-gray-900 group-hover:text-blue-600 transition-colors duration-200 mb-2">
                    <a href={`/${post.id}/`}>
                      <span class="absolute inset-0" />
                      {post.data.title}
                    </a>
                  </h3>
                  <p class="text-gray-500 mb-4 line-clamp-3 leading-relaxed text-sm">
                    {post.data.description}
                  </p>
                </div>
                <div class="mt-4 flex items-center text-xs text-gray-400 font-medium uppercase tracking-wide">
                  <FormattedDate date={post.data.date} />
                </div>
              </article>
            ))
          }
        </div>
      </section>
    </main>
    <Footer />
  </body>
</html>
